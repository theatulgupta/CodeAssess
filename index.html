<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üöÄ CODING CLUB - FIRST TEST | C++ Assessment</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-cpp.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        background-attachment: fixed;
        min-height: 100vh;
        color: #333;
        overflow-x: hidden;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.05)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.05)"/><circle cx="75" cy="25" r="1" fill="rgba(255,255,255,0.03)"/><circle cx="25" cy="75" r="1" fill="rgba(255,255,255,0.03)"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grain)"/></svg>');
        pointer-events: none;
        z-index: -1;
      }

      .header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        padding: 20px;
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .header-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .logo-main {
        font-size: 24px;
        font-weight: bold;
        color: #667eea;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .logo-sub {
        font-size: 12px;
        color: #666;
        font-weight: 500;
        opacity: 0.8;
      }

      .timer {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .timer-display {
        background: #ff4757;
        color: white;
        padding: 10px 20px;
        border-radius: 25px;
        font-size: 18px;
        font-weight: bold;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      .progress-bar {
        width: 200px;
        height: 8px;
        background: #e9ecef;
        border-radius: 4px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea, #764ba2);
        width: 0%;
        transition: width 0.3s ease;
      }

      /* Roll Number Modal Styles */
      .roll-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        overflow: hidden;
      }

      .roll-modal-backdrop {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="dots" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100%" height="100%" fill="url(%23dots)"/></svg>');
        animation: float 20s ease-in-out infinite;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-20px) rotate(1deg);
        }
      }

      .roll-modal-content {
        background: white;
        padding: 50px;
        border-radius: 20px;
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.4);
        width: 90%;
        max-width: 500px;
        text-align: center;
        animation: slideIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        position: relative;
        z-index: 10001;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .roll-modal-content::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);
        border-radius: 20px 20px 0 0;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-80px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .modal-icon {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 20px;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
      }

      .modal-icon i {
        font-size: 36px;
        color: white;
      }

      .roll-modal-header h2 {
        color: #1e3c72;
        margin-bottom: 12px;
        font-size: 28px;
        font-weight: 700;
      }

      .roll-modal-header p {
        color: #666;
        margin-bottom: 30px;
        font-size: 16px;
      }

      .roll-input-container {
        margin-bottom: 30px;
      }

      .roll-input-container label {
        display: block;
        margin-bottom: 10px;
        color: #333;
        font-weight: 600;
        font-size: 16px;
      }

      #rollInput {
        width: 100%;
        padding: 15px 20px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 18px;
        font-family: "Courier New", monospace;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 2px;
        background: #f8f9fa;
        transition: all 0.3s ease;
        outline: none;
      }

      #rollInput:focus {
        border-color: #61dafb;
        background: white;
        box-shadow: 0 0 0 3px rgba(97, 218, 251, 0.2);
      }

      #rollInput.valid {
        border-color: #28a745;
        background: #f8fff9;
      }

      #rollInput.invalid {
        border-color: #dc3545;
        background: #fff8f8;
      }

      .roll-char-count {
        margin-top: 8px;
        font-size: 14px;
        color: #666;
      }

      .roll-error {
        margin-top: 10px;
        color: #dc3545;
        font-size: 14px;
        min-height: 20px;
      }

      .roll-submit-btn {
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
      }

      .roll-submit-btn:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
      }

      .roll-submit-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
        box-shadow: none;
        transform: none;
      }

      /* Authentication Steps Styles */
      .auth-step {
        animation: slideIn 0.5s ease-out;
      }

      .name-confirmation {
        margin: 30px 0;
      }

      .student-card {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 25px;
        border-radius: 12px;
        margin-bottom: 20px;
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
      }

      .student-card .student-roll {
        font-family: "Courier New", monospace;
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 8px;
        opacity: 0.9;
      }

      .student-card .student-name {
        font-size: 22px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .confirmation-text {
        text-align: center;
        font-size: 16px;
        color: #666;
        margin-bottom: 25px;
      }

      .confirmation-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
      }

      .roll-back-btn {
        background: linear-gradient(135deg, #6c757d, #495057);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .roll-back-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
      }

      .submission-info {
        margin: 25px 0;
      }

      .info-card {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 20px;
        background: #f8f9fa;
        border-radius: 8px;
        margin-bottom: 10px;
        border-left: 4px solid #667eea;
      }

      .info-label {
        font-weight: 600;
        color: #495057;
      }

      .info-value {
        font-family: "Courier New", monospace;
        color: #212529;
        font-weight: 500;
      }

      .final-message {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        color: #856404;
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        font-size: 14px;
        margin-top: 20px;
      }

      .final-message i {
        margin-right: 8px;
        color: #f39c12;
      }

      .powered-by {
        margin-top: 15px;
        padding: 8px 15px;
        background: rgba(102, 126, 234, 0.1);
        border-radius: 20px;
        font-size: 12px;
        color: #667eea;
        font-weight: 500;
      }

      .powered-by i {
        margin-right: 5px;
      }

      .container {
        max-width: 1400px;
        margin: 30px auto;
        padding: 0 25px;
      }

      .exam-info {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.98),
          rgba(255, 255, 255, 0.95)
        );
        backdrop-filter: blur(20px);
        padding: 35px;
        border-radius: 25px;
        margin-bottom: 40px;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.12),
          0 0 0 1px rgba(255, 255, 255, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.2);
        position: relative;
        overflow: hidden;
      }

      .exam-info::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          #667eea 0%,
          #764ba2 25%,
          #f093fb 75%,
          #f5576c 100%
        );
        border-radius: 25px 25px 0 0;
      }

      .student-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding-bottom: 20px;
        border-bottom: 2px solid rgba(102, 126, 234, 0.1);
      }

      .welcome {
        font-size: 24px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 700;
        letter-spacing: -0.5px;
      }

      .exam-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 25px;
      }

      .stat-card {
        background: linear-gradient(
          135deg,
          rgba(102, 126, 234, 0.05),
          rgba(118, 75, 162, 0.05)
        );
        padding: 25px;
        border-radius: 18px;
        text-align: center;
        border: 1px solid rgba(102, 126, 234, 0.1);
        transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        position: relative;
        overflow: hidden;
      }

      .stat-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(102, 126, 234, 0.1),
          transparent
        );
        transition: left 0.6s ease;
      }

      .stat-card:hover::before {
        left: 100%;
      }

      .stat-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 20px 40px rgba(102, 126, 234, 0.15);
        border-color: rgba(102, 126, 234, 0.3);
      }

      .stat-number {
        font-size: 32px;
        font-weight: 800;
        background: linear-gradient(135deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 8px;
        display: block;
      }

      .stat-label {
        color: #6c757d;
        font-size: 15px;
        font-weight: 500;
        letter-spacing: 0.5px;
      }

      .question-card {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.98),
          rgba(255, 255, 255, 0.95)
        );
        backdrop-filter: blur(20px);
        margin-bottom: 40px;
        border-radius: 25px;
        overflow: hidden;
        box-shadow: 0 25px 60px rgba(0, 0, 0, 0.15),
          0 0 0 1px rgba(255, 255, 255, 0.3);
        transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        position: relative;
      }

      .question-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          135deg,
          rgba(102, 126, 234, 0.02),
          rgba(118, 75, 162, 0.02)
        );
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
      }

      .question-card:hover {
        transform: translateY(-10px) scale(1.01);
        box-shadow: 0 35px 80px rgba(102, 126, 234, 0.2);
      }

      .question-card:hover::before {
        opacity: 1;
      }

      .question-header {
        background: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #667eea 100%
        );
        background-size: 200% 200%;
        animation: gradientShift 8s ease infinite;
        color: white;
        padding: 30px 35px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
        overflow: hidden;
      }

      .question-header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="dots-header" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100%" height="100%" fill="url(%23dots-header)"/></svg>');
        opacity: 0.3;
        pointer-events: none;
      }

      @keyframes gradientShift {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }

      .question-title {
        font-size: 24px;
        font-weight: 700;
        letter-spacing: -0.5px;
        display: flex;
        align-items: center;
        gap: 12px;
        position: relative;
        z-index: 1;
      }

      .question-title i {
        background: rgba(255, 255, 255, 0.2);
        padding: 10px;
        border-radius: 12px;
        font-size: 18px;
      }

      .question-points {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.25),
          rgba(255, 255, 255, 0.15)
        );
        backdrop-filter: blur(10px);
        padding: 12px 20px;
        border-radius: 25px;
        font-size: 16px;
        font-weight: 600;
        border: 1px solid rgba(255, 255, 255, 0.2);
        position: relative;
        z-index: 1;
      }

      .question-content {
        padding: 40px 35px;
        position: relative;
      }

      .question-description {
        margin-bottom: 30px;
        line-height: 1.8;
        color: #495057;
        font-size: 16px;
        font-weight: 400;
      }

      .question-description h4 {
        color: #2c3e50;
        margin: 30px 0 15px 0;
        font-size: 18px;
        font-weight: 700;
        border-bottom: 3px solid #e1e8f0;
        padding-bottom: 12px;
        position: relative;
        letter-spacing: -0.3px;
      }

      .question-description h4::before {
        content: "";
        position: absolute;
        bottom: -3px;
        left: 0;
        width: 60px;
        height: 3px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 2px;
      }

      .question-description h4:first-child {
        margin-top: 0;
      }

      .code-signature {
        background: linear-gradient(135deg, #f8f9fa, #ffffff);
        border: 2px solid #e1e8f0;
        border-radius: 15px;
        padding: 20px 25px;
        margin: 20px 0;
        font-family: "JetBrains Mono", "Fira Code", "SF Mono", monospace;
        font-size: 15px;
        color: #495057;
        font-weight: 500;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        position: relative;
        overflow: hidden;
      }

      .code-signature::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, #667eea, #764ba2);
      }

      .examples {
        margin: 25px 0;
      }

      .example {
        background: linear-gradient(135deg, #f8fffe, #f0fff4);
        border-left: 5px solid #28a745;
        padding: 25px;
        margin: 20px 0;
        border-radius: 0 15px 15px 0;
        font-size: 15px;
        line-height: 1.7;
        box-shadow: 0 4px 15px rgba(40, 167, 69, 0.1);
        position: relative;
      }

      .example::before {
        content: "üí°";
        position: absolute;
        top: 15px;
        left: -12px;
        background: #28a745;
        color: white;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
      }

      .example strong {
        color: #2c3e50;
        font-weight: 700;
      }

      .constraints {
        list-style: none;
        padding: 0;
        margin: 20px 0;
      }

      .constraints li {
        background: linear-gradient(135deg, #fff8db, #ffeaa7);
        border-left: 5px solid #ffc107;
        padding: 15px 20px;
        margin: 12px 0;
        border-radius: 0 12px 12px 0;
        font-size: 15px;
        color: #856404;
        font-weight: 500;
        box-shadow: 0 4px 15px rgba(255, 193, 7, 0.1);
        position: relative;
      }

      .constraints li::before {
        content: "‚ö°";
        color: #ffc107;
        font-weight: bold;
        margin-right: 10px;
        font-size: 16px;
      }

      .code-example {
        background: linear-gradient(135deg, #f8f9fa, #ffffff);
        border-left: 5px solid #667eea;
        padding: 25px;
        margin: 25px 0;
        border-radius: 0 15px 15px 0;
        font-family: "JetBrains Mono", "Fira Code", "SF Mono", monospace;
        font-size: 14px;
        overflow-x: auto;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.1);
        position: relative;
      }

      .code-example::before {
        content: "</>";
        position: absolute;
        top: 15px;
        left: -12px;
        background: #667eea;
        color: white;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: bold;
      }

      .code-editor {
        position: relative;
        margin-top: 25px;
      }

      .code-editor::before {
        content: "Code Editor";
        position: absolute;
        top: -10px;
        left: 20px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 6px 15px;
        border-radius: 15px;
        font-size: 12px;
        font-weight: 600;
        z-index: 10;
        letter-spacing: 0.5px;
      }

      .code-textarea {
        width: 100%;
        height: 380px;
        border: 2px solid #e1e8f0;
        border-radius: 20px;
        padding: 25px;
        font-family: "JetBrains Mono", "Fira Code", "SF Mono", "Consolas",
          "Liberation Mono", "Menlo", monospace;
        font-size: 15px;
        line-height: 1.7;
        resize: vertical;
        transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
        color: #e8e8e8;
        tab-size: 4;
        box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3),
          0 4px 20px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: auto;
      }

      .code-textarea:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15),
          inset 0 2px 10px rgba(0, 0, 0, 0.3),
          0 8px 30px rgba(102, 126, 234, 0.2);
        transform: scale(1.005);
      }

      .code-textarea::placeholder {
        color: #8a8a8a;
        font-style: italic;
        font-size: 14px;
      }

      /* Syntax highlighting simulation with selection */
      .code-textarea::selection {
        background: rgba(102, 126, 234, 0.3);
      }

      .question-actions {
        display: flex;
        gap: 20px;
        margin-top: 30px;
        flex-wrap: wrap;
        align-items: center;
      }

      .btn {
        padding: 15px 30px;
        border: none;
        border-radius: 15px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        display: flex;
        align-items: center;
        gap: 10px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
        letter-spacing: 0.3px;
        text-transform: uppercase;
        font-size: 13px;
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transition: left 0.6s ease;
      }

      .btn:hover::before {
        left: 100%;
      }

      .btn:active {
        transform: scale(0.98);
      }

      .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: 2px solid transparent;
      }

      .btn-primary:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
      }

      .btn-secondary {
        background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        color: white;
        border: 2px solid transparent;
      }

      .btn-secondary:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 30px rgba(108, 117, 125, 0.4);
        background: linear-gradient(135deg, #5a6269 0%, #3d4449 100%);
      }

      .btn-success {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
        border: 2px solid transparent;
      }

      .btn-success:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 30px rgba(40, 167, 69, 0.4);
      }

      .btn-danger {
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        color: white;
        font-size: 18px;
        padding: 20px 40px;
        box-shadow: 0 6px 25px rgba(220, 53, 69, 0.3);
        border-radius: 20px;
        font-weight: 700;
        text-transform: none;
        letter-spacing: -0.3px;
      }

      .btn-danger:hover {
        transform: translateY(-6px);
        box-shadow: 0 12px 40px rgba(220, 53, 69, 0.5);
        background: linear-gradient(135deg, #c82333 0%, #a71e2a 100%);
      }

      /* Results Modal Button Styles */
      .results-actions {
        border-top: 2px solid #e9ecef;
        background: linear-gradient(135deg, #f8f9fa, #ffffff);
        border-radius: 0 0 20px 20px;
        margin: 20px -40px -40px -40px;
      }

      .results-btn {
        width: auto !important;
        max-width: 200px;
        white-space: nowrap;
        margin: 0 !important;
      }

      .results-btn:hover {
        transform: translateY(-2px);
      }

      /* MCQ Styles */
      .mcq-container {
        background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
        border: 2px solid #333;
        border-radius: 20px;
        padding: 30px;
        margin: 30px 0;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
      }

      .mcq-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #61dafb, #21a1c4, #1890a1);
        border-radius: 20px 20px 0 0;
      }

      .mcq-container h3 {
        color: #61dafb;
        margin-bottom: 20px;
        font-size: 22px;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 12px;
        letter-spacing: -0.3px;
      }

      .mcq-container h3::before {
        content: "üß†";
        background: linear-gradient(135deg, #61dafb, #21a1c4);
        padding: 8px;
        border-radius: 10px;
        font-size: 14px;
      }

      .question-text {
        margin-bottom: 25px;
      }

      .question-text p {
        color: #e8e8e8;
        line-height: 1.8;
        margin: 15px 0;
        font-size: 16px;
        font-weight: 400;
      }

      .mcq-options {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .mcq-options label {
        display: flex;
        align-items: center;
        padding: 18px 20px;
        background: linear-gradient(135deg, #2a2a2a, #333333);
        border: 2px solid #404040;
        border-radius: 15px;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        color: #e8e8e8;
        font-size: 15px;
        font-weight: 500;
        position: relative;
        overflow: hidden;
      }

      .mcq-options label::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(97, 218, 251, 0.1),
          transparent
        );
        transition: left 0.6s ease;
      }

      .mcq-options label:hover::before {
        left: 100%;
      }

      .mcq-options label:hover {
        border-color: #61dafb;
        background: linear-gradient(135deg, #333333, #404040);
        transform: translateX(8px);
        box-shadow: 0 8px 25px rgba(97, 218, 251, 0.2);
      }

      .mcq-options input[type="radio"] {
        margin-right: 15px;
        transform: scale(1.3);
        accent-color: #61dafb;
        filter: brightness(1.2);
      }

      .mcq-options label input[type="radio"]:checked + * {
        color: #61dafb;
        font-weight: 700;
      }

      .mcq-options label:has(input:checked) {
        border-color: #61dafb;
        background: linear-gradient(135deg, #1a4f5c, #2a5a68);
        box-shadow: 0 10px 30px rgba(97, 218, 251, 0.4);
        transform: translateX(10px) scale(1.02);
      }

      .mcq-options label:has(input:checked)::after {
        content: "‚úì";
        position: absolute;
        right: 20px;
        top: 50%;
        transform: translateY(-50%);
        color: #61dafb;
        font-weight: bold;
        font-size: 18px;
        animation: checkmark 0.5s ease;
      }

      @keyframes checkmark {
        0% {
          opacity: 0;
          transform: translateY(-50%) scale(0);
        }
        100% {
          opacity: 1;
          transform: translateY(-50%) scale(1);
        }
      }

      .status-indicator {
        display: inline-block;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 8px;
        position: relative;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(40, 167, 69, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(40, 167, 69, 0);
        }
      }

      .status-indicator {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        margin-right: 12px;
        position: relative;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      }

      .status-saved {
        background: linear-gradient(135deg, #28a745, #20c997);
        animation: pulse-green 2s infinite;
      }

      .status-modified {
        background: linear-gradient(135deg, #ffc107, #ffb300);
        animation: pulse-yellow 2s infinite;
      }

      .status-empty {
        background: linear-gradient(135deg, #dc3545, #c82333);
        animation: pulse-red 2s infinite;
      }

      @keyframes pulse-green {
        0% {
          box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7);
        }
        70% {
          box-shadow: 0 0 0 15px rgba(40, 167, 69, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(40, 167, 69, 0);
        }
      }

      @keyframes pulse-yellow {
        0% {
          box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.7);
        }
        70% {
          box-shadow: 0 0 0 15px rgba(255, 193, 7, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(255, 193, 7, 0);
        }
      }

      @keyframes pulse-red {
        0% {
          box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7);
        }
        70% {
          box-shadow: 0 0 0 15px rgba(220, 53, 69, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(220, 53, 69, 0);
        }
      }

      .submit-section {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.98),
          rgba(255, 255, 255, 0.95)
        );
        backdrop-filter: blur(20px);
        padding: 40px;
        border-radius: 25px;
        text-align: center;
        box-shadow: 0 25px 60px rgba(0, 0, 0, 0.15);
        margin: 40px 0;
        border: 1px solid rgba(255, 255, 255, 0.3);
        position: relative;
        overflow: hidden;
      }

      .submit-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #ff6b6b, #ee5a52, #f093fb, #f5576c);
        border-radius: 25px 25px 0 0;
      }

      .submit-section h3 {
        color: #2c3e50;
        font-size: 28px;
        font-weight: 700;
        margin-bottom: 15px;
        letter-spacing: -0.5px;
      }

      .submit-section p {
        color: #6c757d;
        font-size: 16px;
        margin-bottom: 30px;
        line-height: 1.6;
      }

      .loading-spinner {
        display: none;
        margin: 25px auto;
        width: 50px;
        height: 50px;
        border: 5px solid #f3f3f3;
        border-top: 5px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .success-message {
        display: none;
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
        padding: 25px;
        border-radius: 20px;
        margin: 25px 0;
        animation: slideInUp 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
        box-shadow: 0 10px 30px rgba(40, 167, 69, 0.3);
        font-size: 16px;
        font-weight: 600;
      }

      @keyframes slideInUp {
        from {
          transform: translateY(30px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .results-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(0, 0, 0, 0.8),
          rgba(0, 0, 0, 0.9)
        );
        z-index: 2000;
        backdrop-filter: blur(10px);
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .results-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.98),
          rgba(255, 255, 255, 0.95)
        );
        backdrop-filter: blur(20px);
        padding: 50px;
        border-radius: 30px;
        max-width: 900px;
        width: 90%;
        max-height: 85vh;
        overflow-y: auto;
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.3);
        animation: slideInScale 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
      }

      @keyframes slideInScale {
        from {
          opacity: 0;
          transform: translate(-50%, -50%) scale(0.9) translateY(30px);
        }
        to {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1) translateY(0);
        }
      }

      .score-display {
        text-align: center;
        margin-bottom: 40px;
      }

      .score-circle {
        width: 140px;
        height: 140px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 25px;
        font-size: 36px;
        font-weight: 800;
        color: white;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        position: relative;
        overflow: hidden;
      }

      .score-circle::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          45deg,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        border-radius: 50%;
      }

      .score-excellent {
        background: linear-gradient(135deg, #4caf50, #45a049, #43a047);
      }
      .score-good {
        background: linear-gradient(135deg, #2196f3, #1976d2, #1565c0);
      }
      .score-average {
        background: linear-gradient(135deg, #ff9800, #f57c00, #ef6c00);
      }
      .score-poor {
        background: linear-gradient(135deg, #f44336, #d32f2f, #c62828);
      }

      .test-result {
        background: linear-gradient(135deg, #f8f9fa, #ffffff);
        padding: 20px;
        margin: 15px 0;
        border-radius: 15px;
        border-left: 5px solid #ddd;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
      }

      .test-result:hover {
        transform: translateX(5px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      }

      .test-passed {
        border-left-color: #28a745;
        background: linear-gradient(135deg, #f8fff9, #f0fff4);
      }
      .test-failed {
        border-left-color: #dc3545;
        background: linear-gradient(135deg, #fff8f8, #fff5f5);
      }

      .auto-save-indicator {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
        padding: 15px 25px;
        border-radius: 30px;
        font-size: 15px;
        font-weight: 600;
        opacity: 0;
        transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .auto-save-indicator.show {
        opacity: 1;
        transform: translateY(-10px);
      }

      .auto-save-indicator i {
        animation: spin 1s linear infinite;
      }

      /* Footer Styles */
      .footer {
        background: rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        margin-top: 40px;
        padding: 20px 0;
      }

      .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 20px;
      }

      .footer-left,
      .footer-right {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .footer p {
        margin: 0;
        color: rgba(255, 255, 255, 0.9);
        font-size: 14px;
        font-weight: 500;
      }

      .footer strong {
        color: #61dafb;
        font-weight: 600;
      }

      .footer-sub {
        font-size: 12px !important;
        color: rgba(255, 255, 255, 0.6) !important;
        font-weight: 400 !important;
      }

      .footer i {
        margin-right: 6px;
        color: #61dafb;
      }

      @media (max-width: 1200px) {
        .container {
          max-width: 100%;
          padding: 0 20px;
        }

        .question-content {
          padding: 30px 25px;
        }

        .exam-info {
          padding: 30px 25px;
        }
      }

      @media (max-width: 768px) {
        .container {
          margin: 20px auto;
          padding: 0 15px;
        }

        .header-content {
          flex-direction: column;
          gap: 20px;
          text-align: center;
        }

        .logo-main {
          font-size: 20px;
        }

        .timer {
          flex-direction: column;
          align-items: center;
          gap: 15px;
        }

        .timer-display {
          font-size: 16px;
          padding: 8px 16px;
        }

        .progress-bar {
          width: 150px;
        }

        .exam-stats {
          grid-template-columns: 1fr;
          gap: 15px;
        }

        .stat-card {
          padding: 20px;
        }

        .welcome {
          font-size: 20px;
          text-align: center;
        }

        .student-info {
          flex-direction: column;
          gap: 15px;
          text-align: center;
        }

        .question-header {
          padding: 25px 20px;
          flex-direction: column;
          gap: 15px;
          text-align: center;
        }

        .question-title {
          font-size: 20px;
        }

        .question-content {
          padding: 25px 20px;
        }

        .code-textarea {
          height: 300px;
          font-size: 14px;
          padding: 20px;
        }

        .question-actions {
          flex-direction: column;
          gap: 15px;
        }

        .btn {
          justify-content: center;
          width: 100%;
          padding: 12px 20px;
          font-size: 14px;
        }

        .btn-danger {
          font-size: 16px;
          padding: 15px 25px;
        }

        .mcq-container {
          padding: 25px 20px;
          margin: 25px 0;
        }

        .mcq-options label {
          padding: 15px;
          font-size: 14px;
        }

        .submit-section {
          padding: 30px 20px;
          margin: 30px 0;
        }

        .submit-section h3 {
          font-size: 24px;
        }

        .results-content {
          padding: 30px 20px;
          width: 95%;
          border-radius: 20px;
        }

        .score-circle {
          width: 100px;
          height: 100px;
          font-size: 28px;
        }

        .footer-content {
          flex-direction: column;
          text-align: center;
          gap: 15px;
        }

        .roll-modal-content {
          padding: 30px 20px;
          width: 95%;
          border-radius: 15px;
        }

        .auto-save-indicator {
          bottom: 20px;
          right: 20px;
          padding: 12px 20px;
          font-size: 14px;
        }

        .results-actions {
          margin: 20px -20px -30px -20px;
        }

        .results-actions > div {
          flex-direction: column !important;
          gap: 15px !important;
        }

        .results-btn {
          width: 100% !important;
          max-width: none !important;
        }
      }

      /* Additional Modern UI Enhancements */

      /* Floating Help Button */
      .help-button {
        position: fixed;
        bottom: 100px;
        right: 30px;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 24px;
        cursor: pointer;
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        transition: all 0.3s ease;
        z-index: 1000;
        border: none;
      }

      .help-button:hover {
        transform: translateY(-5px) scale(1.1);
        box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
      }

      /* Enhanced Typography */
      .section-title {
        font-size: 22px;
        font-weight: 700;
        color: #2c3e50;
        margin: 30px 0 20px 0;
        display: flex;
        align-items: center;
        gap: 12px;
        letter-spacing: -0.3px;
      }

      .section-title::before {
        content: "";
        width: 4px;
        height: 25px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 2px;
      }

      /* Enhanced Form Elements */
      .form-group {
        margin-bottom: 25px;
      }

      .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #495057;
        font-size: 14px;
        letter-spacing: 0.3px;
      }

      /* Progress Indicators */
      .question-progress {
        position: sticky;
        top: 80px;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        padding: 15px 25px;
        border-radius: 50px;
        margin: 20px 0;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        justify-content: space-between;
        z-index: 100;
      }

      .progress-text {
        font-size: 14px;
        font-weight: 600;
        color: #667eea;
      }

      .progress-dots {
        display: flex;
        gap: 8px;
      }

      .progress-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #e9ecef;
        transition: all 0.3s ease;
      }

      .progress-dot.active {
        background: linear-gradient(135deg, #667eea, #764ba2);
        transform: scale(1.2);
      }

      .progress-dot.completed {
        background: linear-gradient(135deg, #28a745, #20c997);
      }

      /* Smooth scrolling */
      html {
        scroll-behavior: smooth;
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.1);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, #5a6fd8, #6a4190);
      }

      /* Enhanced focus states */
      *:focus {
        outline: none;
      }

      button:focus,
      input:focus,
      textarea:focus {
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.25);
      }

      /* Subtle animations */
      .fade-in {
        animation: fadeInUp 0.6s ease;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Enhanced shadows */
      .card-shadow {
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
      }

      .card-shadow:hover {
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }

      @media (max-width: 768px) {
        .help-button {
          bottom: 80px;
          right: 20px;
          width: 50px;
          height: 50px;
          font-size: 20px;
        }

        .question-progress {
          padding: 12px 20px;
          border-radius: 40px;
        }

        .progress-text {
          font-size: 13px;
        }
      }

      @media (max-width: 480px) {
        .results-actions {
          margin: 20px -15px -25px -15px;
          padding: 15px;
        }

        .results-btn {
          font-size: 14px !important;
          padding: 12px 20px !important;
        }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <div class="header-content">
        <div class="logo">
          <div class="logo-main">
            <i class="fas fa-code"></i> CODING CLUB - FIRST TEST
          </div>
          <div class="logo-sub">
            Topics: Loops, Conditions, Arrays, Operators | C++ Assessment
          </div>
        </div>
        <div class="timer">
          <div class="timer-display" id="timer">60:00</div>
          <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Security Notice -->
    <div
      style="
        background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        color: white;
        padding: 15px;
        text-align: center;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      "
    >
      <div style="max-width: 1200px; margin: 0 auto">
        <h4 style="margin: 0 0 8px 0; font-size: 16px">
          üîí EXAM SECURITY NOTICE
        </h4>
        <p style="margin: 0; font-size: 14px; opacity: 0.95">
          This exam is monitored for security. Developer tools are disabled. Tab
          switching is tracked. Focus on your work and avoid any academic
          dishonesty. Good luck! üçÄ
        </p>
      </div>
    </div>

    <!-- Roll Number Input Modal -->
    <div id="rollNumberModal" class="roll-modal">
      <div class="roll-modal-backdrop"></div>
      <div class="roll-modal-content">
        <!-- Step 1: Roll Number Input -->
        <div id="rollStep" class="auth-step">
          <div class="roll-modal-header">
            <div class="modal-icon">
              <i class="fas fa-id-card"></i>
            </div>
            <h2>Student Authentication</h2>
            <p>Enter your roll number to access the C++ assessment</p>
            <div class="powered-by">
              <i class="fas fa-code"></i> Built by Atul & Ankit
            </div>
          </div>
          <div class="roll-input-container">
            <label for="rollInput">
              <i class="fas fa-user"></i> Roll Number
            </label>
            <input
              type="text"
              id="rollInput"
              maxlength="8"
              placeholder="25MCSXXX"
              autocomplete="off"
              spellcheck="false"
              style="text-transform: uppercase"
            />
            <div class="roll-char-count">
              <span id="charCount">0</span>/8 characters
            </div>
            <div class="roll-error" id="rollError"></div>
          </div>
          <button id="verifyRollBtn" class="roll-submit-btn" disabled>
            <i class="fas fa-search"></i> Verify Roll Number
          </button>
        </div>

        <!-- Step 2: Name Confirmation -->
        <div id="nameStep" class="auth-step" style="display: none">
          <div class="roll-modal-header">
            <div class="modal-icon">
              <i class="fas fa-user-check"></i>
            </div>
            <h2>Confirm Your Identity</h2>
            <p>Please verify that this is your correct name</p>
          </div>
          <div class="name-confirmation">
            <div class="student-card">
              <div class="student-roll" id="confirmedRoll"></div>
              <div class="student-name" id="confirmedName"></div>
            </div>
            <div class="confirmation-text">Is this information correct?</div>
          </div>
          <div class="confirmation-buttons">
            <button id="backBtn" class="roll-back-btn">
              <i class="fas fa-arrow-left"></i> Back
            </button>
            <button id="startExamBtn" class="roll-submit-btn">
              <i class="fas fa-play"></i> Start Exam
            </button>
          </div>
        </div>

        <!-- Step 3: Already Submitted -->
        <div id="submittedStep" class="auth-step" style="display: none">
          <div class="roll-modal-header">
            <div
              class="modal-icon"
              style="background: linear-gradient(135deg, #ff6b6b, #ee5a52)"
            >
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h2>Test Already Submitted</h2>
            <p>You have already completed this assessment</p>
          </div>
          <div class="submission-info">
            <div class="info-card">
              <div class="info-label">Student:</div>
              <div class="info-value" id="submittedStudentName"></div>
            </div>
            <div class="info-card">
              <div class="info-label">Roll Number:</div>
              <div class="info-value" id="submittedRollNumber"></div>
            </div>
            <div class="info-card">
              <div class="info-label">Submission Time:</div>
              <div class="info-value" id="submissionTime"></div>
            </div>
          </div>
          <div class="final-message">
            <i class="fas fa-info-circle"></i>
            Each student can attempt the test only once. Please contact your
            instructor if you believe this is an error.
          </div>
        </div>
      </div>
    </div>

    <div class="container" id="mainContent" style="display: none">
      <div class="exam-info">
        <div class="student-info">
          <div class="welcome">
            Welcome, <span id="studentName">Student</span>!
          </div>
          <div class="status">
            <span class="status-indicator status-saved"></span>
            Auto-save enabled
          </div>
        </div>
        <div class="exam-stats">
          <div class="stat-card">
            <div class="stat-number">4</div>
            <div class="stat-label">Questions</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">100</div>
            <div class="stat-label">Total Points</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">60</div>
            <div class="stat-label">Minutes</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="completedCount">0</div>
            <div class="stat-label">Completed</div>
          </div>
        </div>
      </div>

      <!-- Important Instructions -->
      <div class="question-card" style="border-left: 4px solid #dc3545">
        <div
          class="question-header"
          style="background: linear-gradient(135deg, #dc3545, #c82333)"
        >
          <div class="question-title">
            <i class="fas fa-exclamation-triangle"></i> Important Instructions
          </div>
          <div class="question-points">Read Carefully</div>
        </div>
        <div class="question-content">
          <div
            style="
              background: #fff3cd;
              border: 1px solid #ffeeba;
              padding: 20px;
              border-radius: 8px;
              margin-bottom: 20px;
            "
          >
            <h4 style="color: #856404; margin-bottom: 15px">
              <i class="fas fa-info-circle"></i> Coding Guidelines:
            </h4>
            <ul style="color: #856404; line-height: 1.8">
              <li>
                <strong>Do NOT write main() function</strong> - It's already
                provided
              </li>
              <li>
                <strong>Do NOT include header files</strong> - All necessary
                headers are pre-included
              </li>
              <li>
                <strong>Just complete the functions</strong> as specified in the
                function signature
              </li>
              <li>
                <strong>Don't change function names or parameters</strong>
              </li>
              <li>
                <strong>Use standard C++ syntax</strong> - avoid
                platform-specific code
              </li>
            </ul>
          </div>
          <div
            style="
              background: #d1ecf1;
              border: 1px solid #bee5eb;
              padding: 15px;
              border-radius: 8px;
            "
          >
            <h4 style="color: #0c5460; margin-bottom: 10px">
              <i class="fas fa-lightbulb"></i> What's Already Included:
            </h4>
            <ul style="color: #0c5460; line-height: 1.6">
              <li><code>#include &lt;iostream&gt;</code> for input/output</li>
              <li><code>#include &lt;algorithm&gt;</code> for sorting (Q1)</li>
              <li><code>#include &lt;utility&gt;</code> for pair (Q2)</li>
              <li><code>using namespace std;</code> directive</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Question 1 -->
      <div class="question-card">
        <div class="question-header">
          <div class="question-title">
            1. Second Minimum + Second Maximum Average
          </div>
          <div class="question-points">25 Points ‚Ä¢ Medium</div>
        </div>
        <div class="question-content">
          <div class="question-description">
            <h4>Problem Statement</h4>
            <p>
              Find the 2nd smallest and 2nd largest numbers in the array. Return
              their average as an integer.
            </p>

            <h4>Function Signature</h4>
            <div class="code-signature">
              <code>int avgSecondMinMax(int arr[], int n)</code>
            </div>

            <h4>Examples</h4>
            <div class="examples">
              <div class="example">
                <strong>Example 1:</strong><br />
                <strong>Input:</strong> arr = [1, 2, 3, 4, 5], n = 5<br />
                <strong>Output:</strong> 3<br />
                <strong>Explanation:</strong> 2nd min = 2, 2nd max = 4, Average
                = (2+4)/2 = 3
              </div>
              <div class="example">
                <strong>Example 2:</strong><br />
                <strong>Input:</strong> arr = [10, 5, 20, 15, 25], n = 5<br />
                <strong>Output:</strong> 17<br />
                <strong>Explanation:</strong> 2nd min = 10, 2nd max = 20,
                Average = (10+20)/2 = 15
              </div>
            </div>

            <h4>Constraints</h4>
            <ul class="constraints">
              <li>4 ‚â§ n ‚â§ 1000 (at least 4 elements needed)</li>
              <li>-1000 ‚â§ arr[i] ‚â§ 1000</li>
              <li>All elements in the array are distinct</li>
              <li>Return the result as an integer</li>
            </ul>
          </div>
          <div class="code-editor">
            <textarea class="code-textarea" id="q1">
int avgSecondMinMax(int arr[], int n) {
    // TODO: Find 2nd smallest and 2nd largest
    // Return their average
    
    return 0;
}</textarea
            >
          </div>
          <div class="question-actions">
            <button class="btn btn-primary" onclick="saveAnswer(1)">
              üíæ Save Answer
            </button>
            <button class="btn btn-secondary" onclick="clearAnswer(1)">
              üóëÔ∏è Clear
            </button>
            <span id="status1" class="status-indicator status-empty"></span>
          </div>
        </div>
      </div>

      <!-- Question 2 -->
      <div class="question-card">
        <div class="question-header">
          <div class="question-title">2. Count Even and Odd Numbers</div>
          <div class="question-points">25 Points ‚Ä¢ Easy</div>
        </div>
        <div class="question-content">
          <div class="question-description">
            <h4>Problem Statement</h4>
            <p>
              Count how many numbers in the array are even and how many are odd.
              Return a pair containing (EvenCount, OddCount).
            </p>

            <h4>Function Signature</h4>
            <div class="code-signature">
              <code>pair&lt;int,int&gt; countEvenOdd(int arr[], int n)</code>
            </div>

            <h4>Examples</h4>
            <div class="examples">
              <div class="example">
                <strong>Example 1:</strong><br />
                <strong>Input:</strong> arr = [1, 2, 3, 4, 5], n = 5<br />
                <strong>Output:</strong> (2, 3)<br />
                <strong>Explanation:</strong> Even numbers: 2, 4 (count=2), Odd
                numbers: 1, 3, 5 (count=3)
              </div>
              <div class="example">
                <strong>Example 2:</strong><br />
                <strong>Input:</strong> arr = [2, 4, 6, 8], n = 4<br />
                <strong>Output:</strong> (4, 0)<br />
                <strong>Explanation:</strong> All numbers are even, no odd
                numbers
              </div>
            </div>

            <h4>Constraints</h4>
            <ul class="constraints">
              <li>1 ‚â§ n ‚â§ 1000</li>
              <li>-1000 ‚â§ arr[i] ‚â§ 1000</li>
              <li>0 is considered an even number</li>
              <li>Return pair with (even_count, odd_count)</li>
            </ul>
          </div>
          <div class="code-editor">
            <textarea class="code-textarea" id="q2">
pair<int,int> countEvenOdd(int arr[], int n) {
    // TODO: Count even and odd numbers
    // Return pair<int,int>(even_count, odd_count)
    
    return make_pair(0, 0);
}</textarea
            >
          </div>
          <div class="question-actions">
            <button class="btn btn-primary" onclick="saveAnswer(2)">
              üíæ Save Answer
            </button>
            <button class="btn btn-secondary" onclick="clearAnswer(2)">
              üóëÔ∏è Clear
            </button>
            <span id="status2" class="status-indicator status-empty"></span>
          </div>
        </div>
      </div>

      <!-- Question 3 -->
      <div class="question-card">
        <div class="question-header">
          <div class="question-title">3. Reverse Array</div>
          <div class="question-points">25 Points ‚Ä¢ Easy</div>
        </div>
        <div class="question-content">
          <div class="question-description">
            <h4>Problem Statement</h4>
            <p>
              Reverse all elements of an array in-place. The function should
              modify the original array directly.
            </p>

            <h4>Function Signature</h4>
            <div class="code-signature">
              <code>void reverseArray(int arr[], int n)</code>
            </div>

            <h4>Examples</h4>
            <div class="examples">
              <div class="example">
                <strong>Example 1:</strong><br />
                <strong>Input:</strong> arr = [1, 2, 3, 4, 5], n = 5<br />
                <strong>Output:</strong> arr becomes [5, 4, 3, 2, 1]<br />
                <strong>Explanation:</strong> Array elements are reversed in
                place
              </div>
              <div class="example">
                <strong>Example 2:</strong><br />
                <strong>Input:</strong> arr = [10, 20, 30], n = 3<br />
                <strong>Output:</strong> arr becomes [30, 20, 10]<br />
                <strong>Explanation:</strong> Three elements reversed
              </div>
            </div>

            <h4>Constraints</h4>
            <ul class="constraints">
              <li>1 ‚â§ n ‚â§ 1000</li>
              <li>-1000 ‚â§ arr[i] ‚â§ 1000</li>
              <li>Modify the array in-place (don't create new array)</li>
              <li>Function returns void (no return value)</li>
            </ul>
          </div>
          <div class="code-editor">
            <textarea class="code-textarea" id="q3">
void reverseArray(int arr[], int n) {
    // TODO: Reverse array elements in-place
    // Hint: Swap elements from start and end, moving inward
    
}</textarea
            >
          </div>
          <div class="question-actions">
            <button class="btn btn-primary" onclick="saveAnswer(3)">
              üíæ Save Answer
            </button>
            <button class="btn btn-secondary" onclick="clearAnswer(3)">
              üóëÔ∏è Clear
            </button>
            <span id="status3" class="status-indicator status-empty"></span>
          </div>
        </div>
      </div>

      <!-- Question 4 -->
      <div class="question-card">
        <div class="question-header">
          <div class="question-title">4. Mini Calculator</div>
          <div class="question-points">25 Points ‚Ä¢ Medium</div>
        </div>
        <div class="question-content">
          <div class="question-description">
            <h4>Problem Statement</h4>
            <p>
              Take two numbers (a, b) and one operator ('+', '-', '*', '/',
              '%'). Return the result of the operation. If operator is invalid,
              return -1.
            </p>

            <h4>Function Signature</h4>
            <div class="code-signature">
              <code>int calculator(int a, int b, char op)</code>
            </div>

            <h4>Examples</h4>
            <div class="examples">
              <div class="example">
                <strong>Example 1:</strong><br />
                <strong>Input:</strong> a = 10, b = 5, op = '+'<br />
                <strong>Output:</strong> 15<br />
                <strong>Explanation:</strong> 10 + 5 = 15
              </div>
              <div class="example">
                <strong>Example 2:</strong><br />
                <strong>Input:</strong> a = 20, b = 4, op = '*'<br />
                <strong>Output:</strong> 80<br />
                <strong>Explanation:</strong> 20 * 4 = 80
              </div>
              <div class="example">
                <strong>Example 3:</strong><br />
                <strong>Input:</strong> a = 10, b = 3, op = 'x'<br />
                <strong>Output:</strong> -1<br />
                <strong>Explanation:</strong> Invalid operator 'x'
              </div>
            </div>

            <h4>Constraints</h4>
            <ul class="constraints">
              <li>-1000 ‚â§ a, b ‚â§ 1000</li>
              <li>Valid operators: '+', '-', '*', '/', '%'</li>
              <li>For division, assume b ‚â† 0</li>
              <li>Return -1 for invalid operators</li>
              <li>Use integer division (truncate decimal part)</li>
            </ul>
          </div>
          <div class="code-editor">
            <textarea class="code-textarea" id="q4">
int calculator(int a, int b, char op) {
    // TODO: Implement calculator for +, -, *, /, %
    // Return -1 for invalid operator
    
    return -1;
}</textarea
            >
          </div>
          <div class="question-actions">
            <button class="btn btn-primary" onclick="saveAnswer(4)">
              üíæ Save Answer
            </button>
            <button class="btn btn-secondary" onclick="clearAnswer(4)">
              üóëÔ∏è Clear
            </button>
            <span id="status4" class="status-indicator status-empty"></span>
          </div>
        </div>
      </div>

      <!-- MCQ Section -->
      <div class="question-section">
        <h2><i class="fas fa-list-check"></i> Multiple Choice Questions</h2>
        <p style="margin: 15px 0; color: #6c757d">
          Complete the following MCQ questions covering C++ concepts. Each
          question has only one correct answer.
        </p>

        <!-- MCQ 1: Pointer Arithmetic -->
        <div class="mcq-container">
          <h3>Question 5: Pointer Arithmetic</h3>
          <div class="question-text">
            <p>Consider the following code:</p>
            <pre
              style="
                background: #1e1e1e;
                color: #f8f8f2;
                padding: 15px;
                border-radius: 5px;
                margin: 10px 0;
              "
            >
int arr[] = {10, 20, 30, 40, 50};
int *ptr = arr + 2;
cout << *(ptr + 1) << " " << *(ptr - 1);</pre
            >
            <p>What will be the output?</p>
          </div>
          <div class="mcq-options">
            <label><input type="radio" name="mcq1" value="a" /> a) 30 10</label>
            <label><input type="radio" name="mcq1" value="b" /> b) 40 20</label>
            <label><input type="radio" name="mcq1" value="c" /> c) 20 40</label>
            <label><input type="radio" name="mcq1" value="d" /> d) 50 30</label>
          </div>
        </div>

        <!-- MCQ 2: Character Array Pointer -->
        <div class="mcq-container">
          <h3>Question 6: Character Array & Pointers</h3>
          <div class="question-text">
            <p>What will be the output of the following code?</p>
            <pre
              style="
                background: #1e1e1e;
                color: #f8f8f2;
                padding: 15px;
                border-radius: 5px;
                margin: 10px 0;
              "
            >
char str[] = "HELLO";
char *p = str + 1;
cout << p << " " << *(p + 2);</pre
            >
          </div>
          <div class="mcq-options">
            <label
              ><input type="radio" name="mcq2" value="a" /> a) ELLO L</label
            >
            <label
              ><input type="radio" name="mcq2" value="b" /> b) HELLO O</label
            >
            <label
              ><input type="radio" name="mcq2" value="c" /> c) ELLO L</label
            >
            <label><input type="radio" name="mcq2" value="d" /> d) ELL L</label>
          </div>
        </div>

        <!-- MCQ 3: Loop Analysis -->
        <div class="mcq-container">
          <h3>Question 7: Loop Analysis</h3>
          <div class="question-text">
            <p>How many times will "Hello" be printed?</p>
            <pre
              style="
                background: #1e1e1e;
                color: #f8f8f2;
                padding: 15px;
                border-radius: 5px;
                margin: 10px 0;
              "
            >
for(int i = 0; i < 5; i++) {
    if(i == 2) continue;
    if(i == 4) break;
    cout << "Hello ";
}</pre
            >
          </div>
          <div class="mcq-options">
            <label><input type="radio" name="mcq3" value="a" /> a) 2</label>
            <label><input type="radio" name="mcq3" value="b" /> b) 3</label>
            <label><input type="radio" name="mcq3" value="c" /> c) 4</label>
            <label><input type="radio" name="mcq3" value="d" /> d) 5</label>
          </div>
        </div>

        <!-- MCQ 4: Recursion Dry Run -->
        <div class="mcq-container">
          <h3>Question 8: Recursion Dry Run</h3>
          <div class="question-text">
            <p>What will be the output of mystery(4)?</p>
            <pre
              style="
                background: #1e1e1e;
                color: #f8f8f2;
                padding: 15px;
                border-radius: 5px;
                margin: 10px 0;
              "
            >
int mystery(int n) {
    if(n <= 1) return 1;
    return n + mystery(n - 2);
}
cout << mystery(4);</pre
            >
          </div>
          <div class="mcq-options">
            <label><input type="radio" name="mcq4" value="a" /> a) 6</label>
            <label><input type="radio" name="mcq4" value="b" /> b) 7</label>
            <label><input type="radio" name="mcq4" value="c" /> c) 8</label>
            <label><input type="radio" name="mcq4" value="d" /> d) 10</label>
          </div>
        </div>

        <!-- MCQ 5: Array & Loop Combination -->
        <div class="mcq-container">
          <h3>Question 9: Array & Loop Combination</h3>
          <div class="question-text">
            <p>What will be stored in result after this code executes?</p>
            <pre
              style="
                background: #1e1e1e;
                color: #f8f8f2;
                padding: 15px;
                border-radius: 5px;
                margin: 10px 0;
              "
            >
int arr[] = {1, 2, 3, 4, 5};
int result = 0;
for(int i = 0; i < 5; i += 2) {
    result += arr[i];
}</pre
            >
          </div>
          <div class="mcq-options">
            <label><input type="radio" name="mcq5" value="a" /> a) 6</label>
            <label><input type="radio" name="mcq5" value="b" /> b) 9</label>
            <label><input type="radio" name="mcq5" value="c" /> c) 12</label>
            <label><input type="radio" name="mcq5" value="d" /> d) 15</label>
          </div>
        </div>
      </div>

      <div class="submit-section">
        <h2><i class="fas fa-rocket"></i> Ready to Submit?</h2>
        <p style="margin: 15px 0; color: #6c757d">
          Make sure you've completed all questions before submitting. Results
          will be shown immediately!
        </p>
        <button class="btn btn-danger" onclick="submitTest()" id="submitBtn">
          <i class="fas fa-paper-plane"></i> Submit Test & Get Results
        </button>
        <div class="loading-spinner" id="loadingSpinner"></div>
        <div class="success-message" id="successMessage">
          <i class="fas fa-check-circle"></i> Test submitted successfully! Check
          results below.
        </div>
      </div>
    </div>

    <!-- Footer with Branding -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-left">
          <p>
            <i class="fas fa-code"></i> Built & Managed by
            <strong>Atul & Ankit</strong>
          </p>
          <p class="footer-sub">Production-grade C++ Assessment Platform</p>
        </div>
        <div class="footer-right">
          <p><i class="fas fa-calendar"></i> Academic Year 2025</p>
          <p class="footer-sub">Secure ‚Ä¢ Reliable ‚Ä¢ Efficient</p>
        </div>
      </div>
    </footer>

    <!-- Results Modal -->
    <div class="results-modal" id="resultsModal">
      <div class="results-content">
        <div id="resultsDisplay"></div>
      </div>
    </div>

    <!-- Auto-save Indicator -->
    <div class="auto-save-indicator" id="autoSaveIndicator">‚úì Auto-saved</div>

    <script>
      // Student Database
      const STUDENT_DATABASE = {
        "25MCSA01": "MOHIL DUBEY",
        "25MCSA02": "AABHAS MALPANI",
        "25MCSA03": "TEJA RISHITHA GANGAVARAM",
        "25MCSA04": "KUMARI ANU",
        "25MCSA05": "SOUGATA ROY",
        "25MCSA06": "KRISHNA MOHANTY",
        "25MCSA07": "HARSHIT SINGH",
        "25MCSA08": "PRASHANT GOSWAMI",
        "25MCSA09": "SOUVIK SARKAR",
        "25MCSA10": "RUBIN JAIN",
        "25MCSA11": "BHUSHAN NARESH GATHIBANDHE",
        "25MCSA12": "LALIT KUMAR",
        "25MCSA13": "DEVESH KUMAR VERMA",
        "25MCSA14": "SURYANSH JAISWAL",
        "25MCSA15": "POOJA PATIDAR",
        "25MCSA16": "MAYANK RAJ",
        "25MCSA17": "IKHLAS IMTIYAJ MANGURE",
        "25MCSA18": "ABHISHEK ANAND",
        "25MCSA19": "SHASHANK J SIROTHIYA",
        "25MCSA20": "SHEKHAR KUMAR",
        "25MCSA21": "MANISH RAMESHCHANDRA SAVKARE",
        "25MCSA22": "PAVAN MURTHY R",
        "25MCSA23": "ANKIT PAWAR",
        "25MCSA24": "HRITHIK VISHAL PAWAR",
        "25MCSA25": "EISLAVATH SRI SAI KIRAN",
        "25MCSS01": "ROHIT SHARMA",
        "25MCSS02": "RICHA VERMA",
        "25MCSS03": "AMIT KUMAR SINGH",
        "25MCSS04": "AVNI TRIVEDI",
        "25MCSS05": "HARSHIT JAIN",
        "25MCSS06": "ATUL KUMAR GUPTA",
        "25MCSS07": "ADARSH DUBEY",
        "25MCSS08": "SAI PAVANI BOORNA",
        "25MCSS09": "SAI KANDREGULA",
        "25MCSS10": "ABHISHEK ASHOK TERANI",
        "25MCSS11": "MANIDEEPAK TOONAM",
        "25MCSS12": "ANKUSH PATEL",
        "25MCSS13": "GIRISH VASTRANE",
        "25MCSS14": "ANIKET RAJKUMAR BHUTANGE",
        "25MCSS15": "GOURAV CHOUHAN",
      };

      // Test submission tracking
      function hasStudentSubmitted(rollNumber) {
        const submitted = localStorage.getItem(`test_submitted_${rollNumber}`);
        return submitted === "true";
      }

      function markStudentAsSubmitted(rollNumber) {
        localStorage.setItem(`test_submitted_${rollNumber}`, "true");
        localStorage.setItem(
          `submission_time_${rollNumber}`,
          new Date().toISOString()
        );
      }

      function isValidStudent(rollNumber) {
        return STUDENT_DATABASE.hasOwnProperty(rollNumber);
      }

      function getStudentName(rollNumber) {
        return STUDENT_DATABASE[rollNumber] || null;
      }
      let studentName = "";
      let answers = {};
      let timeLeft = 60 * 60; // 60 minutes
      let timer;
      let autoSaveInterval;

      // Default templates for each question
      const defaultTemplates = {
        1: `int avgSecondMinMax(int arr[], int n) {
    // TODO: Find 2nd smallest and 2nd largest
    // Return their average
    
    return 0;
}`,
        2: `pair<int,int> countEvenOdd(int arr[], int n) {
    // TODO: Count even and odd numbers
    // Return pair<int,int>(even_count, odd_count)
    
    return make_pair(0, 0);
}`,
        3: `void reverseArray(int arr[], int n) {
    // TODO: Reverse array elements in-place
    // Hint: Swap elements from start and end, moving inward
    
}`,
        4: `int calculator(int a, int b, char op) {
    // TODO: Implement calculator for +, -, *, /, %
    // Return -1 for invalid operator
    
    return -1;
}`,
      };

      // Initialize
      document.addEventListener("DOMContentLoaded", function () {
        // Setup roll number modal
        setupRollNumberModal();

        // Initialize all questions with default content status
        for (let i = 1; i <= 4; i++) {
          updateQuestionStatus(i, "empty");
        }
      });

      function setupRollNumberModal() {
        const rollInput = document.getElementById("rollInput");
        const charCount = document.getElementById("charCount");
        const rollError = document.getElementById("rollError");
        const verifyBtn = document.getElementById("verifyRollBtn");
        const startBtn = document.getElementById("startExamBtn");
        const backBtn = document.getElementById("backBtn");
        const modal = document.getElementById("rollNumberModal");
        const mainContent = document.getElementById("mainContent");

        // Modal steps
        const rollStep = document.getElementById("rollStep");
        const nameStep = document.getElementById("nameStep");
        const submittedStep = document.getElementById("submittedStep");

        // Handle input validation
        rollInput.addEventListener("input", function () {
          let value = this.value.toUpperCase().replace(/[^A-Z0-9]/g, ""); // Only allow alphanumeric
          this.value = value;

          charCount.textContent = value.length;

          // Clear previous states
          rollInput.classList.remove("valid", "invalid");
          rollError.textContent = "";

          if (value.length === 0) {
            verifyBtn.disabled = true;
          } else if (value.length === 8) {
            rollInput.classList.add("valid");
            verifyBtn.disabled = false;
            rollError.textContent = "";
          } else {
            rollInput.classList.add("invalid");
            verifyBtn.disabled = true;
            rollError.textContent = `Enter exactly 8 characters (currently ${value.length})`;
          }
        });

        // Handle Enter key on roll input
        rollInput.addEventListener("keypress", function (e) {
          if (e.key === "Enter" && this.value.length === 8) {
            verifyRollNumber();
          }
        });

        // Handle verify button click
        verifyBtn.addEventListener("click", verifyRollNumber);

        // Handle back button
        backBtn.addEventListener("click", function () {
          showStep(rollStep);
          rollInput.focus();
        });

        // Handle start exam button
        startBtn.addEventListener("click", startExam);

        function showStep(step) {
          rollStep.style.display = "none";
          nameStep.style.display = "none";
          submittedStep.style.display = "none";
          step.style.display = "block";
        }

        function verifyRollNumber() {
          const rollNumber = rollInput.value.trim().toUpperCase();

          if (rollNumber.length !== 8) {
            rollError.textContent = "Roll number must be exactly 8 characters!";
            return;
          }

          // Check if student exists in database
          if (!isValidStudent(rollNumber)) {
            rollError.textContent =
              "Invalid roll number! You are not registered for this exam.";
            rollInput.classList.remove("valid");
            rollInput.classList.add("invalid");
            return;
          }

          // Check if student has already submitted
          if (hasStudentSubmitted(rollNumber)) {
            showSubmittedScreen(rollNumber);
            return;
          }

          // Show name confirmation
          showNameConfirmation(rollNumber);
        }

        function showSubmittedScreen(rollNumber) {
          const studentName = getStudentName(rollNumber);
          const submissionTime = localStorage.getItem(
            `submission_time_${rollNumber}`
          );

          document.getElementById("submittedStudentName").textContent =
            studentName;
          document.getElementById("submittedRollNumber").textContent =
            rollNumber;
          document.getElementById("submissionTime").textContent = submissionTime
            ? new Date(submissionTime).toLocaleString()
            : "Unknown";

          showStep(submittedStep);
        }

        function showNameConfirmation(rollNumber) {
          const studentName = getStudentName(rollNumber);

          document.getElementById("confirmedRoll").textContent = rollNumber;
          document.getElementById("confirmedName").textContent = studentName;

          showStep(nameStep);
        }

        function startExam() {
          const rollNumber = rollInput.value.trim().toUpperCase();
          const studentNameValue = getStudentName(rollNumber);

          // Set global variables
          studentName = studentNameValue; // Update global variable
          window.studentName = studentNameValue;
          window.studentRollNumber = rollNumber;
          window.currentStudentData = {
            rollNumber: rollNumber,
            name: studentNameValue,
            loginTime: new Date().toISOString(),
          };

          // Update UI
          document.getElementById(
            "studentName"
          ).textContent = `${studentNameValue} (${rollNumber})`;

          // Hide modal and show main content
          modal.style.display = "none";
          mainContent.style.display = "block";

          // Start timer and auto-save
          startTimer();
          setupAutoSave();
          loadSavedAnswers();

          // Anti-cheating measures
          setupSecurityMeasures();

          // Auto-focus on first question
          setTimeout(() => {
            document.getElementById("q1").focus();
          }, 500);
        }

        // Auto-focus on roll input
        setTimeout(() => {
          rollInput.focus();
        }, 500);
      }

      // Security and anti-cheating measures
      function setupSecurityMeasures() {
        // Disable right-click context menu
        document.addEventListener("contextmenu", function (e) {
          e.preventDefault();
          return false;
        });

        // Disable common keyboard shortcuts for developer tools
        document.addEventListener("keydown", function (e) {
          // Disable F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
          if (
            e.keyCode === 123 ||
            (e.ctrlKey &&
              e.shiftKey &&
              (e.keyCode === 73 || e.keyCode === 74)) ||
            (e.ctrlKey && e.keyCode === 85)
          ) {
            e.preventDefault();
            alert(
              "‚ö†Ô∏è Developer tools are disabled during the exam for security reasons."
            );
            return false;
          }

          // Disable Ctrl+A (select all) to prevent easy copying
          if (e.ctrlKey && e.keyCode === 65) {
            e.preventDefault();
            return false;
          }
        });

        // Detect if user switches tabs/windows (focus lost)
        let focusWarnings = 0;
        document.addEventListener("visibilitychange", function () {
          if (document.hidden) {
            focusWarnings++;
            alert(
              `‚ö†Ô∏è Warning ${focusWarnings}/3: Please stay focused on the exam. Tab switching is being monitored.`
            );

            if (focusWarnings >= 3) {
              alert(
                "üö® Too many focus violations detected. Your session may be flagged for review."
              );
            }
          }
        });

        // Prevent text selection on question descriptions (but allow in code areas)
        const descriptions = document.querySelectorAll(".question-description");
        descriptions.forEach((desc) => {
          desc.style.webkitUserSelect = "none";
          desc.style.mozUserSelect = "none";
          desc.style.msUserSelect = "none";
          desc.style.userSelect = "none";
        });
      }

      function startTimer() {
        timer = setInterval(() => {
          timeLeft--;
          updateTimerDisplay();
          updateProgress();

          if (timeLeft <= 0) {
            clearInterval(timer);
            alert("‚è∞ Time's up! Auto-submitting your test...");
            submitTest();
          }
        }, 1000);
      }

      function updateTimerDisplay() {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        const display = `${minutes}:${seconds.toString().padStart(2, "0")}`;
        document.getElementById("timer").textContent = display;

        // Change color based on time left
        const timerEl = document.getElementById("timer");
        if (timeLeft < 300) {
          // Less than 5 minutes
          timerEl.style.background = "#dc3545";
        } else if (timeLeft < 900) {
          // Less than 15 minutes
          timerEl.style.background = "#ffc107";
          timerEl.style.color = "#212529";
        }
      }

      function updateProgress() {
        const totalTime = 60 * 60;
        const elapsed = totalTime - timeLeft;
        const percentage = (elapsed / totalTime) * 100;
        document.getElementById("progress").style.width = percentage + "%";
      }

      function setupAutoSave() {
        // Auto-save every 30 seconds
        autoSaveInterval = setInterval(() => {
          autoSaveAnswers();
        }, 30000);

        // Save on text change
        for (let i = 1; i <= 4; i++) {
          document
            .getElementById("q" + i)
            .addEventListener("input", function () {
              const isModified = isContentModified(i);
              updateQuestionStatus(i, isModified ? "modified" : "empty");
              updateCompletedCount();
            });
        }
      }

      function isContentModified(qNum) {
        const currentContent = document.getElementById("q" + qNum).value.trim();
        const defaultContent = defaultTemplates[qNum].trim();
        return currentContent !== defaultContent && currentContent !== "";
      }

      function saveAnswer(qNum) {
        const answer = document.getElementById("q" + qNum).value.trim();
        answers[qNum] = answer;

        const isModified = isContentModified(qNum);
        const isEmpty =
          answer === "" || answer === defaultTemplates[qNum].trim();

        updateQuestionStatus(
          qNum,
          isEmpty ? "empty" : isModified ? "saved" : "empty"
        );
        updateCompletedCount();
        showAutoSaveIndicator();

        // Save to localStorage as backup
        localStorage.setItem(`${studentName}_answers`, JSON.stringify(answers));
      }

      function autoSaveAnswers() {
        for (let i = 1; i <= 4; i++) {
          const answer = document.getElementById("q" + i).value.trim();
          answers[i] = answer;
        }
        localStorage.setItem(`${studentName}_backup`, JSON.stringify(answers));
        showAutoSaveIndicator();
      }

      function loadSavedAnswers() {
        const saved = localStorage.getItem(`${studentName}_answers`);
        if (saved) {
          answers = JSON.parse(saved);
          for (let i = 1; i <= 4; i++) {
            if (answers[i]) {
              document.getElementById("q" + i).value = answers[i];
              updateQuestionStatus(i, "saved");
            }
          }
          updateCompletedCount();
        }
      }

      function updateQuestionStatus(qNum, status) {
        const statusEl = document.getElementById("status" + qNum);
        statusEl.className = `status-indicator status-${status}`;
      }

      function updateCompletedCount() {
        let completed = 0;
        for (let i = 1; i <= 4; i++) {
          if (isContentModified(i)) {
            completed++;
          }
        }
        document.getElementById("completedCount").textContent = completed;
      }

      function clearAnswer(qNum) {
        if (
          confirm(
            "Are you sure you want to reset this answer to the default template?"
          )
        ) {
          document.getElementById("q" + qNum).value = defaultTemplates[qNum];
          answers[qNum] = defaultTemplates[qNum];
          updateQuestionStatus(qNum, "empty");
          updateCompletedCount();
        }
      }

      function showAutoSaveIndicator() {
        const indicator = document.getElementById("autoSaveIndicator");
        indicator.classList.add("show");
        setTimeout(() => {
          indicator.classList.remove("show");
        }, 2000);
      }

      function submitTest() {
        // Show loading state
        const submitBtn = document.getElementById("submitBtn");
        const loadingSpinner = document.getElementById("loadingSpinner");
        const successMessage = document.getElementById("successMessage");

        submitBtn.disabled = true;
        submitBtn.innerHTML =
          '<i class="fas fa-spinner fa-spin"></i> Submitting...';
        loadingSpinner.style.display = "block";

        // Final save
        for (let i = 1; i <= 4; i++) {
          answers[i] = document.getElementById("q" + i).value.trim();
        }

        // Collect MCQ answers
        const mcqAnswers = {};
        for (let i = 1; i <= 5; i++) {
          const selectedOption = document.querySelector(
            `input[name="mcq${i}"]:checked`
          );
          mcqAnswers[`mcq${i}`] = selectedOption ? selectedOption.value : null;
        }

        // Validate at least one answer
        const hasAnswers = Object.keys(answers).some((qNum) => {
          const answer = answers[qNum];
          if (!answer) return false;
          const template = defaultTemplates[qNum];
          return (
            answer !== template &&
            answer.trim() !== "" &&
            answer.trim() !== template.trim()
          );
        });

        const hasMCQAnswers = Object.values(mcqAnswers).some(
          (answer) => answer !== null
        );

        if (!hasAnswers && !hasMCQAnswers) {
          if (
            !confirm(
              "You haven't provided any solutions. Are you sure you want to submit?"
            )
          ) {
            // Reset UI state
            submitBtn.disabled = false;
            submitBtn.innerHTML =
              '<i class="fas fa-paper-plane"></i> Submit Test & Get Results';
            loadingSpinner.style.display = "none";
            return;
          }
        }

        // Show loading modal
        const resultsModal = document.getElementById("resultsModal");
        const resultsDisplay = document.getElementById("resultsDisplay");

        resultsDisplay.innerHTML = `
          <div style="text-align: center; padding: 40px;">
            <div class="loading" style="width: 40px; height: 40px; margin: 0 auto 20px;"></div>
            <h2>üîÑ Processing Your Submission...</h2>
            <p>Compiling and testing your code...</p>
            <div style="margin-top: 20px;">
              <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; font-size: 14px;">
                ‚è±Ô∏è This may take up to 30 seconds
              </div>
            </div>
          </div>
        `;
        resultsModal.style.display = "block";

        // Create submission data with backup
        const submissionData = {
          name: window.studentName || studentName,
          rollNumber: window.studentRollNumber,
          answers: answers,
          mcqAnswers: mcqAnswers,
          timestamp: new Date().toISOString(),
          userAgent: navigator.userAgent,
        };

        // Save local backup immediately
        try {
          const backupKey = `${
            window.studentName || studentName
          }_final_submission`;
          localStorage.setItem(backupKey, JSON.stringify(submissionData));
          localStorage.setItem(
            `last_submission_backup`,
            JSON.stringify(submissionData)
          );
        } catch (e) {
          // Failed to save local backup - continue with submission
        }

        // Submit to server with retry logic
        submitWithRetry(submissionData, 3);
      }

      function submitWithRetry(submissionData, maxRetries) {
        const attempt = maxRetries;

        fetch("/api/submit", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Cache-Control": "no-cache",
          },
          body: JSON.stringify(submissionData),
        })
          .then((response) => {
            if (!response.ok) {
              return response
                .json()
                .then((errorData) => {
                  throw new Error(
                    `HTTP ${response.status}: ${response.statusText}${
                      errorData.details ? " - " + errorData.details : ""
                    }`
                  );
                })
                .catch(() => {
                  throw new Error(
                    `HTTP ${response.status}: ${response.statusText}`
                  );
                });
            }
            return response.json();
          })
          .then((data) => {
            // Clear the backup since submission was successful
            try {
              const backupKey = `${
                window.studentName || studentName
              }_final_submission`;
              localStorage.removeItem(backupKey);
            } catch (e) {}

            showResults(data);
            clearInterval(timer);
            clearInterval(autoSaveInterval);

            // Save successful submission indicator
            localStorage.setItem(
              `${window.studentName || studentName}_submitted`,
              "true"
            );
          })
          .catch((error) => {
            if (maxRetries > 1) {
              // Show retry message
              const resultsDisplay = document.getElementById("resultsDisplay");
              resultsDisplay.innerHTML = `
              <div style="text-align: center; padding: 40px;">
                <div class="loading" style="width: 40px; height: 40px; margin: 0 auto 20px;"></div>
                <h2>üîÑ Connection Issue - Retrying...</h2>
                <p>Attempt ${4 - maxRetries} failed. Trying again...</p>
                <div style="margin-top: 20px;">
                  <div style="background: #fff3cd; padding: 10px; border-radius: 5px; font-size: 14px;">
                    ‚ö†Ô∏è ${error.message}
                  </div>
                </div>
              </div>
            `;

              // Retry after delay
              setTimeout(() => {
                submitWithRetry(submissionData, maxRetries - 1);
              }, 2000);
            } else {
              // All retries failed - show offline mode
              showOfflineSubmission(submissionData, error);
            }
          });
      }

      function showOfflineSubmission(submissionData, lastError) {
        // Reset UI state
        const submitBtn = document.getElementById("submitBtn");
        const loadingSpinner = document.getElementById("loadingSpinner");

        submitBtn.disabled = false;
        submitBtn.innerHTML =
          '<i class="fas fa-exclamation-triangle"></i> Submission Failed - Saved Offline';
        submitBtn.style.background =
          "linear-gradient(135deg, #ffc107, #e0a800)";
        loadingSpinner.style.display = "none";

        const resultsDisplay = document.getElementById("resultsDisplay");

        resultsDisplay.innerHTML = `
          <div style="text-align: center; padding: 40px;">
            <h2>üì± Offline Submission Saved</h2>
            <div style="background: #d4edda; border: 1px solid #c3e6cb; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <h3 style="color: #155724; margin-bottom: 10px;">‚úÖ Your work is safe!</h3>
              <p style="color: #155724; margin-bottom: 15px;">
                Your submission has been saved locally and will be submitted when connection is restored.
              </p>
              <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                <strong>Submission Details:</strong><br>
                Roll Number: ${submissionData.name}<br>
                Time: ${new Date(submissionData.timestamp).toLocaleString()}<br>
                Answers: ${
                  Object.keys(submissionData.answers).filter(
                    (k) => submissionData.answers[k]
                  ).length
                }/4 questions
              </div>
            </div>
            
            <div style="background: #f8d7da; border: 1px solid #f5c6cb; padding: 15px; border-radius: 8px; margin: 20px 0;">
              <h4 style="color: #721c24;">Connection Error:</h4>
              <p style="color: #721c24; font-size: 14px;">${
                lastError.message
              }</p>
            </div>
            
            <div style="margin-top: 30px;">
              <button onclick="retrySubmission()" class="btn btn-primary" style="margin-right: 10px;">
                üîÑ Retry Now
              </button>
              <button onclick="closeModal()" class="btn btn-secondary">
                üì± Continue Offline
              </button>
            </div>
            
            <div style="margin-top: 20px; font-size: 14px; color: #6c757d;">
              <p>üí° <strong>What to do next:</strong></p>
              <ul style="text-align: left; display: inline-block;">
                <li>Your answers are saved in your browser</li>
                <li>Contact your instructor about the technical issue</li>
                <li>Keep this browser window open</li>
                <li>Try refreshing the page and resubmitting</li>
              </ul>
            </div>
          </div>
        `;

        // Stop the timer since we can't submit
        clearInterval(timer);
        clearInterval(autoSaveInterval);
      }

      function retrySubmission() {
        try {
          const backupKey = `${
            window.studentName || studentName
          }_final_submission`;
          const backup = localStorage.getItem(backupKey);
          if (backup) {
            const submissionData = JSON.parse(backup);
            submitWithRetry(submissionData, 3);
          } else {
            // Try fallback backup
            const fallbackBackup = localStorage.getItem(
              `last_submission_backup`
            );
            if (fallbackBackup) {
              const submissionData = JSON.parse(fallbackBackup);
              submitWithRetry(submissionData, 3);
            } else {
              alert("No submission backup found. Please try submitting again.");
              closeModal();
            }
          }
        } catch (e) {
          alert("Error retrieving backup. Please try submitting again.");
          closeModal();
        }
      }

      function closeModal() {
        document.getElementById("resultsModal").style.display = "none";
      }

      function showResults(results) {
        // Mark student as submitted (one-time access control)
        if (window.studentRollNumber) {
          markStudentAsSubmitted(window.studentRollNumber);
        }

        // Reset UI state
        const submitBtn = document.getElementById("submitBtn");
        const loadingSpinner = document.getElementById("loadingSpinner");
        const successMessage = document.getElementById("successMessage");

        if (submitBtn) {
          submitBtn.disabled = false;
          submitBtn.innerHTML =
            '<i class="fas fa-check"></i> Submitted Successfully!';
          submitBtn.style.background =
            "linear-gradient(135deg, #28a745, #20c997)";
        }

        if (loadingSpinner) {
          loadingSpinner.style.display = "none";
        }

        if (successMessage) {
          successMessage.style.display = "block";
        }

        // Ensure results object has required fields
        const safeResults = {
          totalScore: results.totalScore || 0,
          maxScore: results.maxScore || 100,
          codingScore: results.codingScore || 0,
          codingMaxScore: results.codingMaxScore || 75,
          mcqScore: results.mcqScore || 0,
          mcqMaxScore: results.mcqMaxScore || 25,
          results: results.results || {},
          mcqResults: results.mcqResults || {},
        };

        const percentage = (
          (safeResults.totalScore / safeResults.maxScore) *
          100
        ).toFixed(1);
        let scoreClass = "score-poor";
        let emoji = "üòû";

        if (percentage >= 90) {
          scoreClass = "score-excellent";
          emoji = "üéâ";
        } else if (percentage >= 75) {
          scoreClass = "score-good";
          emoji = "üòä";
        } else if (percentage >= 60) {
          scoreClass = "score-average";
          emoji = "üòê";
        }

        let html = `
                <div class="score-display">
                    <div class="score-circle ${scoreClass}">
                        ${percentage}%
                    </div>
                    <h2>${emoji} Your Results</h2>
                    <p style="font-size: 18px; margin: 10px 0;">
                        Total Score: ${safeResults.totalScore}/${safeResults.maxScore} points
                    </p>
                    <div style="display: flex; justify-content: space-around; margin: 20px 0; background: #2a2a2a; padding: 15px; border-radius: 8px;">
                        <div style="text-align: center;">
                            <div style="font-size: 16px; color: #61dafb;">Coding Questions</div>
                            <div style="font-size: 20px; font-weight: bold;">${safeResults.codingScore}/${safeResults.codingMaxScore}</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 16px; color: #61dafb;">MCQ Questions</div>
                            <div style="font-size: 20px; font-weight: bold;">${safeResults.mcqScore}/${safeResults.mcqMaxScore}</div>
                        </div>
                    </div>
                </div>
                <hr style="margin: 30px 0;">
            `;

        // Display coding results
        if (
          safeResults.results &&
          Object.keys(safeResults.results).length > 0
        ) {
          html += `<h3 style="color: #61dafb; margin-bottom: 20px;"><i class="fas fa-code"></i> Coding Questions Results</h3>`;

          Object.keys(safeResults.results).forEach((qNum) => {
            const qResult = safeResults.results[qNum];
            html += `
                        <div style="margin-bottom: 25px;">
                            <h4>Question ${qNum} Results</h4>
                    `;

            if (qResult.error) {
              html += `
                            <div class="test-result test-failed">
                                ‚ùå ${qResult.error}
                                <div style="margin-top: 10px; color: #6c757d;">
                                    Score: 0/${qResult.maxScore || 25} points
                                </div>
                            </div>
                        `;
            } else if (qResult.tests && Array.isArray(qResult.tests)) {
              qResult.tests.forEach((test) => {
                html += `
                                <div class="test-result ${
                                  test.passed ? "test-passed" : "test-failed"
                                }">
                                    ${test.passed ? "‚úÖ" : "‚ùå"} Test Case ${
                  test.testCase || "N/A"
                }
                                    <div style="margin-top: 5px; font-family: monospace;">
                                        Expected: ${
                                          test.expected || "N/A"
                                        } | Your Output: ${test.actual || "N/A"}
                                    </div>
                                    <div style="margin-top: 5px; color: #6c757d;">
                                        Points: ${test.points || 0}/${
                  test.maxPoints || 10
                }
                                    </div>
                                </div>
                            `;
              });
            } else {
              html += `
                            <div class="test-result test-failed">
                                ‚ùå No test results available
                                <div style="margin-top: 10px; color: #6c757d;">
                                    Score: 0/25 points
                                </div>
                            </div>
                        `;
            }
            html += "</div>";
          });
        }

        // Display MCQ results
        if (
          safeResults.mcqResults &&
          Object.keys(safeResults.mcqResults).length > 0
        ) {
          html += `<h3 style="color: #61dafb; margin: 30px 0 20px 0;"><i class="fas fa-list-check"></i> Multiple Choice Questions Results</h3>`;

          Object.keys(safeResults.mcqResults).forEach((mcqKey) => {
            const mcqResult = safeResults.mcqResults[mcqKey];
            const questionNum = mcqKey.replace("mcq", "");
            const questionLabel = parseInt(questionNum) + 4; // MCQ starts from Q5

            html += `
                        <div class="test-result ${
                          mcqResult.status === "Correct"
                            ? "test-passed"
                            : "test-failed"
                        }">
                            ${
                              mcqResult.status === "Correct" ? "‚úÖ" : "‚ùå"
                            } Question ${questionLabel} (MCQ)
                            <div style="margin-top: 5px;">
                                Your Answer: ${
                                  mcqResult.studentAnswer || "Not answered"
                                } | Correct Answer: ${
              mcqResult.correctAnswer || "N/A"
            }
                            </div>
                            <div style="margin-top: 5px; color: #6c757d;">
                                Points: ${mcqResult.score || 0}/${
              mcqResult.maxScore || 5
            }
                            </div>
                        </div>
                    `;
          });
        }

        html += `
                <div class="results-actions" style="text-align: center; margin-top: 40px; padding: 20px;">
                    <div style="display: flex; gap: 20px; justify-content: center; align-items: center; flex-wrap: wrap;">
                        <button class="btn btn-primary results-btn" onclick="window.print()" style="flex: 0 0 auto; min-width: 160px;">
                            üñ®Ô∏è Print Results
                        </button>
                        <button class="btn btn-secondary results-btn" onclick="location.reload()" style="flex: 0 0 auto; min-width: 160px;">
                            üîÑ Take Another Test
                        </button>
                    </div>
                </div>
            `;

        const resultsDisplay = document.getElementById("resultsDisplay");
        if (resultsDisplay) {
          resultsDisplay.innerHTML = html;
        }

        // Disable all inputs except results buttons
        document.querySelectorAll("textarea, button").forEach((el) => {
          // Skip results buttons
          if (el.classList.contains("results-btn")) {
            return;
          }

          if (
            !el.onclick ||
            (!el.onclick.toString().includes("print") &&
              !el.onclick.toString().includes("reload"))
          ) {
            el.disabled = true;
          }
        });

        // Also disable MCQ radio buttons
        document.querySelectorAll('input[type="radio"]').forEach((el) => {
          el.disabled = true;
        });
      }
    </script>
  </body>
</html>
